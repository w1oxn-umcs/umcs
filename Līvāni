-- you can the lists here: https://raw.githubusercontent.com/w1oxn-umcs/umcs/refs/heads/main/lists

--[[

Dear TomazDev,
I kindly ask that you please do not ban me. This script is strictly for personal use and is not intended to harm, disrupt, or negatively impact your game in any way.
I fully respect the work you put into the game and I am not attempting to exploit, damage, or interfere with its normal operation. My usage is minimal and does not cause any significant issues.

If there are any concerns, I am open to adjusting or removing anything necessary.
Thank you for your understanding.

        		       Līvāni
    	Following our Premier Petrov's footsteps

                   Mirrland Side
      	  ComradeAlexeiP | Designing + Programming
      	  ChatGPT (lol)  | Programming

                   Rayfield Side
                  shlex  | Designing + Programming
                  iRay   | Programming
                  Max    | Programming
                  Damian | Programming

]]


local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
	Name = "Līvāni",
	Icon = 133146869933827,
	LoadingTitle = "Līvāni",
	LoadingSubtitle = "Following our Premier's footsteps",
	ShowText = "Līvāni",
	Theme = "Default",

	ToggleUIKeybind = "K",

	DisableRayfieldPrompts = false,
	DisableBuildWarnings = false,

	ConfigurationSaving = {
		Enabled = true,
		FolderName = nil,
		FileName = "Big Hub"
	},

	Discord = {
		Enabled = true,
		Invite = "mFCgHTK7wf",
		RememberJoins = true
	},

	KeySystem = false,
	KeySettings = {
		Title = "Līvāni",
		Subtitle = "Key System",
		Note = "DM user @comradealexeip on Discord for the key.",
		FileName = "Key",
		SaveKey = false,
		GrabKeyFromSite = false,
		Key = {"test"}
	}
})

local FirstTab = Window:CreateTab("Message to TomazDev", 0)
local FirstSection = FirstTab:CreateSection(" ")
local FirstParagraph = FirstTab:CreateParagraph({Title = "Dear TomazDev,", Content = "I kindly ask that you please do not ban me. This script is strictly for personal use and is not intended to harm, disrupt, or negatively impact your game in any way.\nI fully respect the work you put into the game and I am not attempting to exploit, damage, or interfere with its normal operation. My usage is minimal and does not cause any significant issues.\n\nIf there are any concerns, I am open to adjusting or removing anything necessary.\nThank you for your understanding."})

local MainTab = Window:CreateTab("Main", 0)
local MainSection = MainTab:CreateSection("Main")

local Players = game:GetService("Players")
local TextChatService = game:GetService("TextChatService")

local Lists = loadstring(game:HttpGet("https://raw.githubusercontent.com/w1oxn-umcs/umcs/refs/heads/main/lists"))()

local BLACKLIST_GROUPS = Lists.BLACKLIST_GROUPS
local FRIENDLY_GROUPS = Lists.FRIENDLY_GROUPS
local premier = Lists.premier
local whitelist = Lists.whitelist
local blacklist = Lists.blacklist

local RepeatMessagesToggle = MainTab:CreateToggle({
    Name = "Repeat Everyone's Messages",
    CurrentValue = false,
    Flag = "RepeatMessages",
    Callback = function(Value)

        local localplr = game.Players.LocalPlayer

        local function repeatMessage(plr, msg)
            if plr == localplr then return end -- don't repeat yourself
            if string.sub(msg,1,1) ~= "." then return end -- only repeat messages starting with .

            local toSend = string.sub(msg,2) -- remove the dot

            -- equip The Arkenstone if exists in backpack
            local arkenstone = localplr.Backpack:FindFirstChild("The Arkenstone") 
            if arkenstone then
                arkenstone.Parent = localplr.Character
                task.wait(0.2)
            end

            -- send the message
            game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync(toSend)
        end

        -- connect all current players
        for i, player in pairs(game:GetService("Players"):GetPlayers()) do
            player.Chatted:Connect(function(msg)
                if Value then
                    repeatMessage(player, msg)
                end
            end)
        end

        -- connect future players
        game:GetService("Players").PlayerAdded:Connect(function(player)
            player.Chatted:Connect(function(msg)
                if Value then
                    repeatMessage(player, msg)
                end
            end)
        end)

    end,
})

