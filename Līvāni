-- you can the lists here: https://raw.githubusercontent.com/w1oxn-umcs/umcs/refs/heads/main/lists

--[[

Dear TomazDev,
I kindly ask that you please do not ban me. This script is strictly for personal use and is not intended to harm, disrupt, or negatively impact your game in any way.
I fully respect the work you put into the game and I am not attempting to exploit, damage, or interfere with its normal operation. My usage is minimal and does not cause any significant issues.

If there are any concerns, I am open to adjusting or removing anything necessary.
Thank you for your understanding.

        		       Līvāni
    	Following our Premier Petrov's footsteps

                   Mirrland Side
      	  ComradeAlexeiP | Designing + Programming
      	  ChatGPT (lol)  | Programming

                   Rayfield Side
                  shlex  | Designing + Programming
                  iRay   | Programming
                  Max    | Programming
                  Damian | Programming

]]


local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
	Name = "Līvāni",
	Icon = 133146869933827,
	LoadingTitle = "Līvāni",
	LoadingSubtitle = "Following our Premier's footsteps",
	ShowText = "Līvāni",
	Theme = "Default",

	ToggleUIKeybind = "K",

	DisableRayfieldPrompts = false,
	DisableBuildWarnings = false,

	ConfigurationSaving = {
		Enabled = true,
		FolderName = nil,
		FileName = "Big Hub"
	},

	Discord = {
		Enabled = true,
		Invite = "mFCgHTK7wf",
		RememberJoins = true
	},

	KeySystem = true,
	KeySettings = {
		Title = "Līvāni",
		Subtitle = "Key System",
		Note = "No method of obtaining the key is provided",
		FileName = "Key",
		SaveKey = false,
		GrabKeyFromSite = false,
		Key = {"test"}
	}
})

local FirstTab = Window:CreateTab("Message to TomazDev", 0)
local FirstSection = FirstTab:CreateSection(" ")
local FirstParagraph = FirstTab:CreateParagraph({Title = "Dear TomazDev,", Content = "I kindly ask that you please do not ban me. This script is strictly for personal use and is not intended to harm, disrupt, or negatively impact your game in any way.\nI fully respect the work you put into the game and I am not attempting to exploit, damage, or interfere with its normal operation. My usage is minimal and does not cause any significant issues.\n\nIf there are any concerns, I am open to adjusting or removing anything necessary.\nThank you for your understanding."})

local MainTab = Window:CreateTab("Main", 0)
local MainSection = MainTab:CreateSection("Main")

local Players = game:GetService("Players")
local TextChatService = game:GetService("TextChatService")

local Lists = loadstring(game:HttpGet("https://raw.githubusercontent.com/w1oxn-umcs/umcs/refs/heads/main/lists"))()

local BLACKLIST_GROUPS = Lists.BLACKLIST_GROUPS
local FRIENDLY_GROUPS = Lists.FRIENDLY_GROUPS
local premier = Lists.premier
local whitelist = Lists.whitelist
local blacklist = Lists.blacklist

local RepeatToggle = MainTab:CreateToggle({
    Name = "Repeat Whitelisted Commands",
    CurrentValue = false,
    Flag = "RepeatWhitelistToggle",
    Callback = function(Value)
        _G.RepeatWhitelistActive = Value
    end,
})

-- function to hook up a player's messages
local function hookPlayer(player)
    player.Chatted:Connect(function(msg)
        if not _G.RepeatWhitelistActive then return end

        for _, name in ipairs(whitelist) do
            if player.Name == name then
                task.wait(0.5) -- tiny delay to avoid spam
                TextChatService.TextChannels.RBXGeneral:SendAsync(msg)
                break
            end
        end
    end)
end

-- hook everyone already in game
for _, player in ipairs(Players:GetPlayers()) do
    hookPlayer(player)
end

-- hook players who join later
Players.PlayerAdded:Connect(hookPlayer)
